<html><body><h1>Demo Chat Backend</h1>
  <script>
    function chatear() {
     
      pregunta = document.getElementById("pregunta").value;
      sesion = document.getElementById("sesion").value;
      var apiUrl = 'https://chat-genai-demo-xcowfeupla-uc.a.run.app';
      var parametro = encodeURI(pregunta);
      var destino = apiUrl + '?sesion=' + sesion + '&pregunta=' + parametro;
         
          fetch(destino).then(response => {
            return response.text();
          }).then(data => {
            // Work with JSON data here
            document.getElementById("historia").value = document.getElementById("historia").value + "\r\nusuario: " + pregunta + "\r\nbot: " + data;
          }).catch(err => {
            alert("error" + err);
            // Do something for an error here
          });
    }
  </script>
  <form>
    <label for="fname">Sesion:</label><br>
      <input type="text" id="sesion" size="50" value="1"></input><br>
      <label for="fname">Pregunta:</label><br>
      <input type="text" id="pregunta" size="50"/><br>
      <button type="button" onclick="chatear()">Chatear </button><br>
      <textarea id="historia" rows="10" cols="50"></textarea>
  </form>
  </body></html>